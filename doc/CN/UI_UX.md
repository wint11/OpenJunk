# UI/UX 设计

## 设计理念
SmartRead 采用“内容优先”的设计理念。界面简洁、无干扰且高度响应，优先考虑阅读体验，同时保持管理工具易于访问但不喧宾夺主。

## 组件实现细节

### 1. 阅读器视图 (无限滚动)
位于 `src/components/reader-view.tsx`。
*   **架构**: 采用类似虚拟列表的自定义方案，结合手动 DOM 同步。
*   **状态**: 维护 `loadedChapters` 数组，包含上一章、当前章和下一章的内容。
*   **无限加载**:
    *   **向下加载**: 由底部的 `IntersectionObserver` 哨兵触发。追加内容到 `loadedChapters`。
    *   **向上加载**: 由顶部哨兵触发。向前插入内容到 `loadedChapters`。
*   **滚动同步**: 当向前插入章节时，浏览器的默认行为是跳到顶部。我们使用 `useLayoutEffect` 计算高度差 (`newScrollHeight - prevScrollHeight`) 并立即调整 `scrollTop`，从而创造无缝的“向上滚动”体验。

### 2. 主题系统
*   **Provider**: 使用 `next-themes` 提供商包裹应用。
*   **实现**: 在 `<html>` 标签上切换 `class` (dark/light/sepia)。
*   **Tailwind**: 组件使用 `dark:bg-zinc-950` 修饰符。“羊皮纸(Sepia)”主题通过自定义类覆盖背景和文本颜色的 CSS 变量来实现。

## 关键界面模块

### 1. 阅读器视图
支持两种模式的阅读体验：
*   **章节式阅读** (`/novel/[id]/chapter/[chapterId]`): 
    *   应用的核心部分，支持长篇论文或小说的沉浸式阅读。
    *   **无限滚动**: 触底自动加载下一章。
    *   **上下文菜单**: 默认隐藏，点击屏幕中央唤起。
    *   **个性化**: 用户可调整字体大小、背景颜色（羊皮纸、深色、浅色）和行高。
    *   **VIP 付费墙**: VIP 章节显示模糊遮罩和“解锁”按钮。
*   **PDF 阅读器** (`/novel/[id]/read`):
    *   全屏 PDF 预览，支持缩放和导航。
    *   原生文件支持：直接加载上传的 PDF 文件。

### 2. 论文与期刊展示
*   **趋势榜** (`/trends`):
    *   展示全站热度最高的前 10 篇论文。
    *   动态排名徽章：前三名高亮显示。
    *   实时热度数据：通过火焰图标展示。
*   **论文卡片**:
    *   统一的 UI 组件展示论文摘要、作者、期刊信息。
    *   操作栏：查看详情、热度显示、PDF 格式标识。
*   **期刊矩阵** (`/journals`):
    *   网格布局展示所有活跃期刊。
    *   统计概览：显示收录论文数与编辑团队规模。

### 3. 投稿与管理
*   **快速通道**:
    *   针对内部人员（主编/编辑）的简化投稿流程。
    *   自动识别身份并筛选可投稿的期刊列表。
*   **作者工作台** (`/author`):
    *   **数据表格**: 使用 `shadcn/ui` Table 组件展示稿件列表及状态徽章。
    *   **编辑器**: 用于撰写章节的富文本编辑器（支持 Markdown）。
    *   **实时验证**: 表单使用 `zod` 模式验证，提供即时的错误反馈。
*   **管理后台** (`/admin`):
    *   **仪表盘**: 概览指标（总用户数、日活用户）。
    *   **审核队列**: 分屏界面，用于审核待发布章节，并高亮显示 AI 建议。
    *   **期刊管理**: 创建、编辑期刊，指派管理员与审稿人。
    *   **用户审计**: 查看用户行为日志与登录记录。

### 4. 浏览与搜索 (`/browse`)
*   **筛选器**: 侧边栏支持按“所属期刊”、“学科分类”和“排序方式”（最新/最热）筛选。
*   **搜索**: 全局搜索功能，支持标题、作者与摘要检索。

## 响应式策略
*   **移动优先**: 所有布局均优先针对移动屏幕构建，随后扩展适配平板和桌面。
*   **导航**:
    *   *桌面端*: 顶部水平导航栏。
    *   *移动端*: 响应式汉堡菜单，适配小屏操作。

## 用户流程
1.  **发现**: 首页/趋势榜 -> 浏览/搜索 -> 论文详情 -> 在线阅读/下载 PDF -> 评论/点赞。
2.  **创作**: 投稿入口 -> 填写元数据/上传文件 -> 提交审核（或快速发布）。
3.  **审核**: 管理员/审稿人收到通知 -> 审核内容 -> 发布或驳回。
